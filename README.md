# mysyslog

`mysyslog` — это функция для записи логов в файл. Она позволяет логировать сообщения с указанием уровня важности, драйвера, формата сообщения и пути к файлу лога.

## Описание

Функция `mysyslog` предоставляет гибкую возможность записывать лог-сообщения в текстовом или JSON формате. Это удобно для мониторинга приложений, отладки и отслеживания событий.

### Прототип функции

```c
int mysyslog(const char* msg, int level, int driver, int format, const char* path);
```

### Параметры

- `msg` (const char *):  
  Строка с текстом сообщения, которое будет записано в лог.

- `level` (int):  
  Уровень важности сообщения. Поддерживаемые значения:
  - `DEBUG` (0): Отладочная информация.
  - `INFO` (1): Информационное сообщение.
  - `WARN` (2): Предупреждение.
  - `ERROR` (3): Ошибка.
  - `CRITICAL` (4): Критическая ошибка.

- `driver` (int):  
  Идентификатор драйвера или компонента, от которого исходит сообщение. Целое число.

- `format` (int):  
  Формат записи лога. Поддерживаемые значения:
  - `0`: Текстовый формат.
  - `1`: JSON формат.

- `path` (const char *):  
  Путь к файлу, в который будет записано сообщение.

### Возвращаемое значение

- Возвращает `0`, если запись в лог прошла успешно.
- Возвращает `-1`, если произошла ошибка (например, невозможно открыть файл).

## Пример использования

```c
#include <stdio.h>

int main(void) {
    if (mysyslog("Системное сообщение", INFO, 1, 0, "logfile.txt") != 0) {
        fprintf(stderr, "Ошибка записи в лог-файл.\n");
        return 1;
    }

    if (mysyslog("Критическая ошибка", CRITICAL, 2, 1, "logfile.txt") != 0) {
        fprintf(stderr, "Ошибка записи в лог-файл.\n");
        return 1;
    }

    return 0;
}
```

## Формат лога

### Текстовый формат

Сообщения записываются в формате:  
`<временная метка> <уровень> <драйвер> <сообщение>`

Пример:
```
2024-12-22 15:10:00 INFO 1 Системное сообщение
```

### JSON формат

Сообщения записываются в JSON-формате:

```json
{
    "timestamp": "2024-12-22 15:10:00",
    "log_level": "CRITICAL",
    "driver": 2,
    "message": "Критическая ошибка"
}
```

## Основные возможности

- Запись логов в текстовом или JSON формате.
- Указание уровня логирования.
- Поддержка идентификации драйверов.

## Ограничения

- Файл лога должен быть доступен для записи.
- JSON формат не включает автоматическую обработку спецсимволов в тексте сообщения.

---

С помощью `mysyslog` можно удобно реализовать логирование событий в приложении, сохраняя как структурированные, так и простые текстовые записи.
